<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="shortcut icon" href="../../favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="../../assets/css/just-the-docs-default.css"> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-2724382-16"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-2724382-16'); </script> <script type="text/javascript" src="../../assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="../../assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.7.1 --> <title>CDC COM Port Dual Example | Harmony 3 USB Device application examples</title> <meta name="generator" content="Jekyll v3.9.0" /> <meta property="og:title" content="CDC COM Port Dual Example" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Harmony 3 USB Device application examples" /> <meta property="og:description" content="Harmony 3 USB Device application examples" /> <link rel="canonical" href="../../apps/cdc_com_port_dual/readme.html" /> <meta property="og:url" content="../../apps/cdc_com_port_dual/readme.html" /> <meta property="og:site_name" content="Harmony 3 USB Device application examples" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="CDC COM Port Dual Example" /> <script type="application/ld+json"> {"headline":"CDC COM Port Dual Example","@type":"WebPage","url":"../../apps/cdc_com_port_dual/readme.html","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"../../assets/images/vendor/microchip_mplab_harmony_logo_150_transparent.png"}},"description":"Harmony 3 USB Device application examples","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="../../index.html" class="site-title lh-tight"> <div class="site-logo"></div> </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../index.html" class="nav-list-link">Harmony 3 USB Device application examples</a><ul class="nav-list "><li class="nav-list-item active"><a href="../../apps/cdc_com_port_dual/readme.html" class="nav-list-link active">CDC COM Port Dual Example</a></li><li class="nav-list-item "><a href="../../apps/cdc_com_port_single/readme.html" class="nav-list-link">CDC COM Port Single Example</a></li><li class="nav-list-item "><a href="../../apps/cdc_msd_basic/readme.html" class="nav-list-link">CDC MSD Basic Example</a></li><li class="nav-list-item "><a href="../../apps/cdc_msd_sdcard/readme.html" class="nav-list-link">CDC MSD SD Card Example</a></li><li class="nav-list-item "><a href="../../apps/cdc_serial_emulator/readme.html" class="nav-list-link">CDC Serial Emulator Example</a></li><li class="nav-list-item "><a href="../../apps/hid_basic/readme.html" class="nav-list-link">HID Basic Example</a></li><li class="nav-list-item "><a href="../../apps/hid_joystick/readme.html" class="nav-list-link">HID Joystick Example</a></li><li class="nav-list-item "><a href="../../apps/hid_keyboard/readme.html" class="nav-list-link">HID Keyboard Example</a></li><li class="nav-list-item "><a href="../../apps/hid_msd_basic/readme.html" class="nav-list-link">HID MSD Basic Example</a></li><li class="nav-list-item "><a href="../../apps/hid_mouse/readme.html" class="nav-list-link">HID Mouse Example</a></li><li class="nav-list-item "><a href="../../apps/msd_basic/readme.html" class="nav-list-link">MSD Basic Example</a></li><li class="nav-list-item "><a href="../../apps/msd_sdcard/readme.html" class="nav-list-link">MSD SD Card Example</a></li><li class="nav-list-item "><a href="../../apps/printer_basic/readme.html" class="nav-list-link">Printer Example</a></li><li class="nav-list-item "><a href="../../apps/usb_uart_bridge_dual/readme.html" class="nav-list-link">USB UART Bridge Dual Channel Example</a></li><li class="nav-list-item "><a href="../../apps/vendor/readme.html" class="nav-list-link">Vendor Example</a></li></ul></li><li class="nav-list-item"><a href="../../release_notes.html" class="nav-list-link">Release notes</a></li><li class="nav-list-item"><a href="../../mplab_harmony_license.html" class="nav-list-link">License</a></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Harmony 3 USB Device application examples" aria-label="Search Harmony 3 USB Device application examples" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="https://support.microchip.com" class="site-button" > Obtain Support from Microchip </a> </li> </ul> </nav> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="../../index.html">Harmony 3 USB Device application examples</a></li> <li class="breadcrumb-nav-list-item"><span>CDC COM Port Dual Example</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <p><a href="https://www.microchip.com"><img src="https://www.microchip.com/ResourcePackages/Microchip/assets/dist/images/logo.png" alt="MCHP" /></a></p> <h1 id="cdc-com-port-dual-example-cdc_com_port_dual"> <a href="#cdc-com-port-dual-example-cdc_com_port_dual" aria-labelledby="cdc-com-port-dual-example-cdc_com_port_dual" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> CDC COM Port Dual Example (cdc_com_port_dual) </h1> <p>This application demonstrates the ability of the MPLAB Harmony USB Device Stack to support multiple instances of the same device class. It creates a USB CDC Device that enumerates as two serial ports on the USB Host PC.</p> <h2 id="description"> <a href="#description" aria-labelledby="description" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Description </h2> <p>This application is example of a USB CDC Device that enumerates as a dual COM port on the USB host PC. The COM port can be opened using any of the terminal applications. To demonstrate communication between the two COM ports, a character typed in one of the COM port is displayed on the other and vice versa.</p> <h2 id="downloading-and-building-the-application"> <a href="#downloading-and-building-the-application" aria-labelledby="downloading-and-building-the-application" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Downloading and building the application </h2> <p>To clone or download this application from Github, go to the <a href="https://github.com/Microchip-MPLAB-Harmony/usb_apps_device">main page of this repository</a> and then click <strong>Clone</strong> button to clone this repository or download as zip file. This content can also be downloaded using content manager by following these <a href="https://github.com/Microchip-MPLAB-Harmony/contentmanager/wiki">instructions</a>.</p> <p>Path of the application within the repository is <a href="https://github.com/Microchip-MPLAB-Harmony/usb_apps_device/apps/cdc_com_port_dual">usb_apps_device/apps/cdc_com_port_dual</a>.</p> <p>Following table gives the details of project configurations, target device used, hardware and its IDE. Open the project using the respective IDE and build it.</p> <div class="table-wrapper"><table> <thead> <tr> <th>Project Name</th> <th>IDE</th> <th>Target Device</th> <th>Hardware / Configuration</th> </tr> </thead> <tbody> <tr> <td>sam_d11_xpro.X</td> <td>MPLABX</td> <td>ATSAMD11D14A</td> <td><a href="#config_1">SAM D11 Xplained Pro board</a></td> </tr> <tr> <td>sam_d21_xpro.X</td> <td>MPLABX</td> <td>ATSAMD21J18A</td> <td><a href="#config_2">SAM D21 Xplained Pro board</a></td> </tr> <tr> <td>sam_e54_xpro.X</td> <td>MPLABX</td> <td>ATSAME54P20A</td> <td><a href="#config_3">SAM E54 Xplained Pro board</a></td> </tr> <tr> <td>sam_e54_xpro_freertos.X</td> <td>MPLABX</td> <td>ATSAME54P20A</td> <td><a href="#config_3">SAM E54 Xplained Pro board</a></td> </tr> <tr> <td>sam_e70_xult.X</td> <td>MPLABX</td> <td>ATSAME70Q21B</td> <td><a href="#config_4">SAM E70 Xplained Ultra board</a></td> </tr> <tr> <td>sam_e70_xult_freertos.X</td> <td>MPLABX</td> <td>ATSAME70Q21B</td> <td><a href="#config_4">SAM E70 Xplained Ultra board</a></td> </tr> <tr> <td>sam_v71_xult.X</td> <td>MPLABX</td> <td>ATSAMV71Q21B</td> <td><a href="config_5">SAM V71 Xplained Ultra board</a></td> </tr> <tr> <td>sam_v71_xult_freertos.X</td> <td>MPLABX</td> <td>ATSAMV71Q21B</td> <td><a href="config_5">SAM V71 Xplained Ultra board</a></td> </tr> </tbody> </table></div> <h2 id="-configuring-the-hardware"> <a href="#-configuring-the-hardware" aria-labelledby="-configuring-the-hardware" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <a name="config_title"></a> Configuring the Hardware </h2> <h3 id="-sam-d11-xplained-pro-board"> <a href="#-sam-d11-xplained-pro-board" aria-labelledby="-sam-d11-xplained-pro-board" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <a name="config_1"></a> <a href="https://www.microchip.com/developmenttools/ProductDetails/atsamd11-xpro">SAM D11 Xplained Pro board</a> </h3> <ul> <li>Use TARGET USB connector on the board to connect the USB Device to the USB Host PC.</li> <li>LED0 indicates USB Device Configuration Set Complete event (the USB device functionality has been activated by the USB Host).</li> </ul> <h3 id="-sam-d21-xplained-pro-board"> <a href="#-sam-d21-xplained-pro-board" aria-labelledby="-sam-d21-xplained-pro-board" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <a name="config_2"></a> <a href="https://www.microchip.com/developmenttools/ProductDetails/atsamd21-xpro">SAM D21 Xplained Pro board</a> </h3> <ul> <li>Use TARGET USB connector on the board to connect the USB Device to the USB Host PC.</li> <li>LED0 indicates USB Device Configuration Set Complete event (the USB device functionality has been activated by the USB Host).</li> </ul> <h3 id="-sam-e54-xplained-pro-board"> <a href="#-sam-e54-xplained-pro-board" aria-labelledby="-sam-e54-xplained-pro-board" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <a name="config_3"></a> <a href="https://www.microchip.com/developmenttools/productdetails/atsame54-xpro">SAM E54 Xplained Pro board</a> </h3> <ul> <li>Use TARGET USB connector on the board to connect the USB Device to the USB Host PC.</li> <li>LED0 indicates USB Device Configuration Set Complete event (the USB device functionality has been activated by the USB Host).</li> </ul> <h3 id="-sam-e70-xplained-ultra-board"> <a href="#-sam-e70-xplained-ultra-board" aria-labelledby="-sam-e70-xplained-ultra-board" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <a name="config_4"></a> <a href="https://www.microchip.com/DevelopmentTools/ProductDetails/PartNO/DM320113">SAM E70 Xplained Ultra board</a> </h3> <ul> <li>Jumper J203 must be shorted between PB08 and VBUS (positions 2 and 3).</li> <li>Use TARGET USB J200 connector on the board to connect the USB Device to the USB Host PC.</li> <li>LED3 indicates USB Device Configuration Set Complete event (the USB device functionality has been activated by the USB Host).</li> </ul> <h3 id="-sam-v71-xplained-ultra-board"> <a href="#-sam-v71-xplained-ultra-board" aria-labelledby="-sam-v71-xplained-ultra-board" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <a name="config_5"></a> <a href="https://www.microchip.com/DevelopmentTools/ProductDetails/PartNO/ATSAMV71-XULT">SAM V71 Xplained Ultra board</a> </h3> <ul> <li>Jumper titled “USB VBUS” must be shorted between PC09 and VBUS (positions 2 and 3)</li> <li>Use TARGET USB connector on the board to connect the USB Device to the USB Host PC.</li> <li>LED0 indicates USB Device Configuration Set Complete event (the USB device functionality has been activated by the USB Host).</li> </ul> <h2 id="running-the-application"> <a href="#running-the-application" aria-labelledby="running-the-application" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Running the Application </h2> <p>This demonstration creates a USB device that enumerates as two serial (COM) ports on the host. Do the following to run this demonstration:</p> <ol> <li>Open the project with appropriate IDE. Compile the project and program the target device.</li> <li> <p>Attach the device to the host. If the host is a personal computer and this is the first time you have plugged this device into the computer you may be prompted for a .inf file.</p> <p><img src="../../apps/cdc_com_port_dual/images/cdc_com_port_dual_figure_1.png" alt="Found New Hardware Wizard" /></p> </li> <li> <p>Select the “Install from a list or specific location (Advanced)” option. Navigate to the driver path available in the repo - <em>..\usb_apps_device\apps\cdc_com_port_dual\inf</em>.</p> <p><img src="../../apps/cdc_com_port_dual/images/cdc_com_port_dual_figure_2.png" alt="Install Driver Path" /></p> <p><strong>Note:</strong> To specifically select the driver, open the <em>Device Manager</em> and expand the Ports (COM &amp; LPT) tab, and right click on <em>Update Driver Software</em>.</p> <p><img src="../../apps/cdc_com_port_dual/images/cdc_com_port_dual_figure_3.png" alt="Update Driver Software" /></p> <p>Verify that the enumerated USB device is seen as a virtual USB serial comport in <em>Device Manager</em>.</p> <p><img src="../../apps/cdc_com_port_dual/images/cdc_com_port_dual_figure_4.png" alt="Device Manager" /></p> <p><strong>NOTE:</strong> The LEDs on the demonstration board will indicate the USB state of the device. Refer to the <a href="#config_title">Configuring the Hardware</a> section for the selected target hardware.</p> </li> <li>Once the device is successfully installed and visible on the <em>Device Manager</em>, open two instances of terminal program, such as HyperTerminal and select the appropriate COM port. Set the serial port settings as follows: <ul> <li>Baud : 9600</li> <li>Data : 8 Bits</li> <li>Parity : None</li> <li>Stop : 1 Bit</li> <li>Flow Control : None</li> </ul> <p><strong>Note:</strong> The baud rate can be different from 9600 but the chosen value has to be the same on both the instances of terminal program.</p> <p><img src="../../apps/cdc_com_port_dual/images/cdc_com_port_dual_figure_5.png" alt="Teraterm New Connection" /></p> </li> <li> <p>To run the demonstration, turn on local echo on both the terminals. If the terminal application is Tera Term, navigate to Setup-&gt;Terminal to turn on local echo. Type a character or string in one terminal window. The same character or string shall appear on the second terminal window and vice versa. The following screen shot shows two instances of Tera Term.</p> <p><img src="../../apps/cdc_com_port_dual/images/cdc_com_port_dual_figure_6.png" alt="Teraterm Dual Port" /></p> <p><strong>Note:</strong> Some terminal programs, like HyperTerminal, require users to click the disconnect button before removing the device from the computer. Failing to do so may result in having to close and open the program again to reconnect to the device.</p> </li> </ol> <hr> <footer> <p class="text-small text-grey-dk-000 mb-0"><img src='https://raw.githubusercontent.com/wiki/Microchip-MPLAB-Harmony/Microchip-MPLAB-Harmony.github.io/images/microchip_logo.png' /><br />Copyright &copy; 2020 Microchip Technology.</p> <!-- <p class="text-small text-grey-dk-000 mb-0"><img src='../../assets/images/vendor/microchip_logo.png' /><br /> Copyright &copy; 2021 Microchip Technology.</p> --> </footer> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
