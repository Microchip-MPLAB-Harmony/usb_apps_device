<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="shortcut icon" href="../../favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="../../assets/css/just-the-docs-default.css"> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-2724382-16"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-2724382-16'); </script> <script type="text/javascript" src="../../assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="../../assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.7.1 --> <title>USB UART Bridge Single Channel Example | Harmony 3 USB Device application examples</title> <meta name="generator" content="Jekyll v3.9.0" /> <meta property="og:title" content="USB UART Bridge Single Channel Example" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Harmony 3 USB Device application examples" /> <meta property="og:description" content="Harmony 3 USB Device application examples" /> <link rel="canonical" href="../../apps/usb_uart_bridge_single/readme.html" /> <meta property="og:url" content="../../apps/usb_uart_bridge_single/readme.html" /> <meta property="og:site_name" content="Harmony 3 USB Device application examples" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="USB UART Bridge Single Channel Example" /> <script type="application/ld+json"> {"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"../../assets/images/vendor/microchip_mplab_harmony_logo_150_transparent.png"}},"@type":"WebPage","url":"../../apps/usb_uart_bridge_single/readme.html","headline":"USB UART Bridge Single Channel Example","description":"Harmony 3 USB Device application examples","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="../../index.html" class="site-title lh-tight"> <div class="site-logo"></div> </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../index.html" class="nav-list-link">Harmony 3 USB Device application examples</a><ul class="nav-list "><li class="nav-list-item "><a href="../../apps/cdc_com_port_dual/readme.html" class="nav-list-link">CDC COM Port Dual Example</a></li><li class="nav-list-item "><a href="../../apps/cdc_com_port_single/readme.html" class="nav-list-link">CDC COM Port Single Example</a></li><li class="nav-list-item "><a href="../../apps/cdc_msd_basic/readme.html" class="nav-list-link">CDC MSD Basic Example</a></li><li class="nav-list-item "><a href="../../apps/cdc_msd_sdcard/readme.html" class="nav-list-link">CDC MSD SD Card Example</a></li><li class="nav-list-item "><a href="../../apps/cdc_serial_emulator/readme.html" class="nav-list-link">CDC Serial Emulator Example</a></li><li class="nav-list-item "><a href="../../apps/cdc_serial_emulator_msd/readme.html" class="nav-list-link">CDC Serial Emulator MSD Example</a></li><li class="nav-list-item "><a href="../../apps/hid_basic/readme.html" class="nav-list-link">HID Basic Example</a></li><li class="nav-list-item "><a href="../../apps/hid_basic_remote_wakeup/readme.html" class="nav-list-link">HID Basic Remote Wakeup Example</a></li><li class="nav-list-item "><a href="../../apps/hid_joystick/readme.html" class="nav-list-link">HID Joystick Example</a></li><li class="nav-list-item "><a href="../../apps/hid_keyboard/readme.html" class="nav-list-link">HID Keyboard Example</a></li><li class="nav-list-item "><a href="../../apps/hid_msd_basic/readme.html" class="nav-list-link">HID MSD Basic Example</a></li><li class="nav-list-item "><a href="../../apps/hid_mouse/readme.html" class="nav-list-link">HID Mouse Example</a></li><li class="nav-list-item "><a href="../../apps/msd_basic/readme.html" class="nav-list-link">MSD Basic Example</a></li><li class="nav-list-item "><a href="../../apps/msd_multiple_luns/readme.html" class="nav-list-link">MSD Multiple LUN Example</a></li><li class="nav-list-item "><a href="../../apps/msd_sdcard/readme.html" class="nav-list-link">MSD SD Card Example</a></li><li class="nav-list-item "><a href="../../apps/printer_basic/readme.html" class="nav-list-link">Printer Example</a></li><li class="nav-list-item "><a href="../../apps/usb_uart_bridge_dual/readme.html" class="nav-list-link">USB UART Bridge Dual Channel Example</a></li><li class="nav-list-item active"><a href="../../apps/usb_uart_bridge_single/readme.html" class="nav-list-link active">USB UART Bridge Single Channel Example</a></li><li class="nav-list-item "><a href="../../apps/vendor/readme.html" class="nav-list-link">Vendor Example</a></li></ul></li><li class="nav-list-item"><a href="../../release_notes.html" class="nav-list-link">Release notes</a></li><li class="nav-list-item"><a href="../../mplab_harmony_license.html" class="nav-list-link">License</a></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Harmony 3 USB Device application examples" aria-label="Search Harmony 3 USB Device application examples" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="https://support.microchip.com" class="site-button" > Obtain Support from Microchip </a> </li> </ul> </nav> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="../../index.html">Harmony 3 USB Device application examples</a></li> <li class="breadcrumb-nav-list-item"><span>USB UART Bridge Single Channel Example</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <p><a href="https://www.microchip.com"><img src="https://www.microchip.com/ResourcePackages/Microchip/assets/dist/images/logo.png" alt="MCHP" /></a></p> <h1 id="usb-uart-bridge-single-channel-example-usb_usart_bridge_single"> <a href="#usb-uart-bridge-single-channel-example-usb_usart_bridge_single" aria-labelledby="usb-uart-bridge-single-channel-example-usb_usart_bridge_single" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> USB UART Bridge Single Channel Example (usb_usart_bridge_single) </h1> <p>This application demonstrates the ability of the MPLAB® Harmony USB Device Stack to support the CDC Device Class using a real-world application. It implements a USB-USART Bridge application.</p> <h2 id="description"> <a href="#description" aria-labelledby="description" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Description </h2> <p>This application demonstrates the use of the CDC device class to implement a USB-UART bridge. The application enumerates as a COM port on the personal computer. Any data sent through the virtual COM port will be seen at the respective UART port Tx pin and data sent through the UART Rx pin of the MCU will be seen at the virtual COM port.</p> <h2 id="downloading-and-building-the-application"> <a href="#downloading-and-building-the-application" aria-labelledby="downloading-and-building-the-application" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Downloading and building the application </h2> <p>To clone or download this application from Github, go to the <a href="https://github.com/Microchip-MPLAB-Harmony/usb_apps_device">main page of this repository</a> and then click the <strong>Clone</strong> button to clone this repository or download it as a zip file. This content can also be downloaded using the MPLAB® Harmony Content Manager by following these <a href="https://github.com/Microchip-MPLAB-Harmony/contentmanager/wiki">instructions</a>.</p> <p>The path of the application within the repository is <a href="https://github.com/Microchip-MPLAB-Harmony/usb_apps_device/tree/master/apps/usb_uart_bridge_single">usb_apps_device/apps/usb_usart_bridge_single</a>.</p> <p>The following table gives the details of project configurations, target device used, hardware, and its IDE. Open the project using the respective IDE and build it.</p> <div class="table-wrapper"><table> <thead> <tr> <th>Project Name</th> <th>IDE</th> <th>Target Device</th> <th>Hardware / Configuration</th> </tr> </thead> <tbody> <tr> <td>sam_d21_xpro.X</td> <td>MPLABX</td> <td>ATSAMD21J18A</td> <td><a href="#config_2">SAM D21 Xplained Pro board</a></td> </tr> <tr> <td>sam_e54_xpro.X</td> <td>MPLABX</td> <td>ATSAME54P20A</td> <td><a href="#config_3">SAM E54 Xplained Pro Board</a></td> </tr> </tbody> </table></div> <h2 id="-configuring-the-hardware"> <a href="#-configuring-the-hardware" aria-labelledby="-configuring-the-hardware" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <a name="config_title"></a> Configuring the Hardware </h2> <h3 id="-sam-d21-xplained-pro-board"> <a href="#-sam-d21-xplained-pro-board" aria-labelledby="-sam-d21-xplained-pro-board" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <a name="config_2"></a> <a href="https://www.microchip.com/developmenttools/ProductDetails/atsamd21-xpro">SAM D21 Xplained Pro board</a> </h3> <ul> <li>Use the TARGET USB connector on the board to connect the USB device to the USB Host PC.</li> <li>LED0 indicates USB Device Configuration Set Complete event (the USB device functionality has been activated by the USB Host).</li> <li> <p>Short the pins SERCOM1 USART TX (PA16) and SERCOM1 USART RX (PA17). These pins are available on the connector EXT2 pins 17 and 15 respectively.</p> <p><img src="../../apps/usb_uart_bridge_single/images/usb_usart_bridge_dual_block.png" alt="Block Diagram" /> <img src="../../apps/usb_uart_bridge_single/images/usb_usart_bridge_dual_samd21.png" alt="Board Connection" /></p> </li> </ul> <h3 id="-sam-e54-xplained-pro-board"> <a href="#-sam-e54-xplained-pro-board" aria-labelledby="-sam-e54-xplained-pro-board" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <a name="config_3"></a> <a href="https://www.microchip.com/developmenttools/productdetails/atsame54-xpro">SAM E54 Xplained Pro Board</a> </h3> <ul> <li>Use the TARGET USB connector on the board to connect the USB device to the USB Host PC.</li> <li>LED0 indicates USB Device Configuration Set Complete event (the USB device functionality has been activated by the USB Host).</li> <li> <p>Short the pins SERCOM0 USART TX (PA04) and SERCOM0 USART (PA05). These pins are available on the connector EXT1 pins 14 and 13 respectively.</p> <p><img src="../../apps/usb_uart_bridge_single/images/usb_usart_bridge_single_sam_e54_xpro.png" alt="Block Diagram" /> <img src="../../apps/usb_uart_bridge_single/images/usb_usart_bridge_dual_same54.png" alt="Board Connection" /></p> </li> </ul> <h2 id="running-the-application"> <a href="#running-the-application" aria-labelledby="running-the-application" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Running the Application </h2> <p>This demonstration allows the device to appear like a serial (COM) port to the host. Do the following to run this demonstration:</p> <ol> <li> <p>Open the project with appropriate IDE. Compile the project and program the target device.</p> </li> <li> <p>Attach the device to the host. If the host is a personal computer and this is the first time you have plugged this device into the computer, you may be prompted for a .inf file:</p> <p><img src="../../apps/usb_uart_bridge_single/images/cdc_usart_bridge_dual_figure_1.png" alt="Found New Hardware Wizard" /></p> </li> <li> <p>Select the “Install from a list or specific location (Advanced)” option. Specify the <em>..\usb_apps_device\apps\usb_uart_bridge_single\inf</em> directory. <img src="../../apps/usb_uart_bridge_single/images/cdc_usart_bridge_dual_figure_2.png" alt="Install Driver Path" /></p> <p><strong>Note:</strong> To specifically select the driver, open the <em>device manager</em> and expand the Ports (COM &amp; LPT) tab, and right click on <em>Update Driver Software</em>.</p> <p><img src="../../apps/usb_uart_bridge_single/images/cdc_usart_bridge_dual_figure_3.png" alt="Update Driver Software" /></p> <p>Verify that the enumerated USB device is seen as a virtual USB serial comport in Device Manager. <img src="../../apps/usb_uart_bridge_single/images/cdc_usart_bridge_dual_figure_4.png" alt="Device Manager" /></p> </li> <li>Once the device is successfully installed, open an instance of a serial terminal program, such as HyperTerminal and select the appropriate COM port. Set the serial port settings as follows: <ul> <li>Baud : 9600</li> <li>Data : 8 Bits</li> <li>Parity : None</li> <li>Stop : 1 Bit</li> <li>Flow Control : None</li> </ul> <p><strong>Note:</strong> The baud rate can different from 9600.</p> <p><img src="../../apps/usb_uart_bridge_single/images/cdc_usart_bridge_dual_figure_5.png" alt="Teraterm New Connection" /></p> </li> <li>The LEDs on the demonstration board will indicate the USB state of the device. Refer to the <a href="#config_title">Configuring the Hardware</a> section for the selected board for more details.</li> <li> <p>To run the demonstration, turn OFF the local echo on the serial terminal. For Tera Term terminal application, navigate to Setup-&gt;Terminal to turn OFF local echo. A character or string typed in the terminal window will be displayed on the same terminal as the Rx/Tx pins are shorted.</p> <p><img src="../../apps/usb_uart_bridge_single/images/cdc_usart_bridge_dual_figure_6.png" alt="Teraterm New Connection" /></p> </li> </ol> <hr> <footer> <p class="text-small text-grey-dk-000 mb-0"><img src='https://raw.githubusercontent.com/wiki/Microchip-MPLAB-Harmony/Microchip-MPLAB-Harmony.github.io/images/microchip_logo.png' /><br />Copyright &copy; 2020 Microchip Technology.</p> <!-- <p class="text-small text-grey-dk-000 mb-0"><img src='../../assets/images/vendor/microchip_logo.png' /><br /> Copyright &copy; 2021 Microchip Technology.</p> --> </footer> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
